var Qt=Object.defineProperty;var Xt=(t,e,l)=>e in t?Qt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var De=(t,e,l)=>(Xt(t,typeof e!="symbol"?e+"":e,l),l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function l(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=l(o);fetch(o.href,i)}})();function E(){}function Yt(t,e){for(const l in e)t[l]=e[l];return t}function Pt(t){return t()}function xe(){return Object.create(null)}function ce(t){t.forEach(Pt)}function Dt(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Zt(t){return Object.keys(t).length===0}function Mt(t,...e){if(t==null){for(const n of e)n(void 0);return E}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function xt(t){let e;return Mt(t,l=>e=l)(),e}function R(t,e,l){t.$$.on_destroy.push(Mt(e,l))}function Bt(t,e,l,n){if(t){const o=jt(t,e,l,n);return t[0](o)}}function jt(t,e,l,n){return t[1]&&n?Yt(l.ctx.slice(),t[1](n(e))):l.ctx}function zt(t,e,l,n){if(t[2]&&n){const o=t[2](n(l));if(e.dirty===void 0)return o;if(typeof o=="object"){const i=[],r=Math.max(e.dirty.length,o.length);for(let s=0;s<r;s+=1)i[s]=e.dirty[s]|o[s];return i}return e.dirty|o}return e.dirty}function Ht(t,e,l,n,o,i){if(o){const r=jt(e,l,n,i);t.p(r,o)}}function Jt(t){if(t.ctx.length>32){const e=[],l=t.ctx.length/32;for(let n=0;n<l;n++)e[n]=-1;return e}return-1}function D(t,e,l){return t.set(l),e}function m(t,e){t.appendChild(e)}function v(t,e,l){t.insertBefore(e,l||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function ee(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function b(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function V(){return S(" ")}function Oe(){return S("")}function P(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function g(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function en(t){return Array.from(t.childNodes)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function et(t,e){t.value=e??""}function tt(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,n?"important":"")}function K(t,e,l){t.classList.toggle(e,!!l)}function tn(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Ce;function $e(t){Ce=t}function nn(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function Je(){const t=nn();return(e,l,{cancelable:n=!1}={})=>{const o=t.$$.callbacks[e];if(o){const i=tn(e,l,{cancelable:n});return o.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}const be=[],ae=[];let we=[];const Be=[],ln=Promise.resolve();let je=!1;function on(){je||(je=!0,ln.then(Rt))}function ze(t){we.push(t)}function ve(t){Be.push(t)}const Me=new Set;let he=0;function Rt(){if(he!==0)return;const t=Ce;do{try{for(;he<be.length;){const e=be[he];he++,$e(e),rn(e.$$)}}catch(e){throw be.length=0,he=0,e}for($e(null),be.length=0,he=0;ae.length;)ae.pop()();for(let e=0;e<we.length;e+=1){const l=we[e];Me.has(l)||(Me.add(l),l())}we.length=0}while(be.length);for(;Be.length;)Be.pop()();je=!1,Me.clear(),$e(t)}function rn(t){if(t.fragment!==null){t.update(),ce(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ze)}}function sn(t){const e=[],l=[];we.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),we=e}const Se=new Set;let me;function re(){me={r:0,c:[],p:me}}function ie(){me.r||ce(me.c),me=me.p}function T(t,e){t&&t.i&&(Se.delete(t),t.i(e))}function F(t,e,l,n){if(t&&t.o){if(Se.has(t))return;Se.add(t),me.c.push(()=>{Se.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function B(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ke(t,e,l){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=l,l(t.$$.ctx[n]))}function J(t){t&&t.c()}function j(t,e,l){const{fragment:n,after_update:o}=t.$$;n&&n.m(e,l),ze(()=>{const i=t.$$.on_mount.map(Pt).filter(Dt);t.$$.on_destroy?t.$$.on_destroy.push(...i):ce(i),t.$$.on_mount=[]}),o.forEach(ze)}function z(t,e){const l=t.$$;l.fragment!==null&&(sn(l.after_update),ce(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function cn(t,e){t.$$.dirty[0]===-1&&(be.push(t),on(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(t,e,l,n,o,i,r=null,s=[-1]){const c=Ce;$e(t);const f=t.$$={fragment:null,ctx:[],props:i,update:E,not_equal:o,bound:xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:xe(),dirty:s,skip_bound:!1,root:e.target||c.$$.root};r&&r(f.root);let u=!1;if(f.ctx=l?l(t,e.props||{},(p,k,...d)=>{const _=d.length?d[0]:k;return f.ctx&&o(f.ctx[p],f.ctx[p]=_)&&(!f.skip_bound&&f.bound[p]&&f.bound[p](_),u&&cn(t,p)),k}):[],f.update(),u=!0,ce(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const p=en(e.target);f.fragment&&f.fragment.l(p),p.forEach(w)}else f.fragment&&f.fragment.c();e.intro&&T(t.$$.fragment),j(t,e.target,e.anchor),Rt()}$e(c)}class Z{constructor(){De(this,"$$");De(this,"$$set")}$destroy(){z(this,1),this.$destroy=E}$on(e,l){if(!Dt(l))return E;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const o=n.indexOf(l);o!==-1&&n.splice(o,1)}}$set(e){this.$$set&&!Zt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fn);function un(t){let e;return{c(){e=b("div"),e.innerHTML='<h1 class="svelte-xx4icy">ðŸŽ¼ (Some) London Classical Concerts ðŸŽ»</h1>',g(e,"class","title svelte-xx4icy")},m(l,n){v(l,e,n)},p:E,i:E,o:E,d(l){l&&w(e)}}}class an extends Z{constructor(e){super(),Y(this,e,null,un,Q,{})}}const pe=[{tagName:"Wigmore Hall",tagColor:"#17a8ad",filterFunc:t=>t.venue==="Wigmore Hall"},{tagName:"Wigmore U35 Â£5",tagColor:"#3694cf",filterFunc:t=>t.is_wigmore_u35},{tagName:"BBC Proms",tagColor:"#c462f5",filterFunc:t=>t.is_prom},{tagName:"Royal Albert Hall",tagColor:"#c72ac2",filterFunc:t=>t.venue==="Royal Albert Hall"}];function dn(t,e){let l=e.searchTerm.toLowerCase(),n=e.searchTerm===""||t.title.toLowerCase().includes(l)||t.subtitle!==null&&t.subtitle.toLowerCase().includes(l)||t.venue.toLowerCase().includes(l)||t.performers.some(i=>i.name.toLowerCase().includes(l)),o=e.booleanTagNames.every(i=>{let r=pe.find(s=>s.tagName===i);return r===void 0?(console.error(`Unknown boolean tag ${i}`),!1):r.filterFunc(t)});return n&&o}function nt(t,e){let l=[];return t.forEach(n=>{dn(n,e)&&l.push(n.id)}),l}const He={searchTerm:"",booleanTagNames:[]};function _n(t){let e,l,n=t[0].tagName+"",o,i,r;return{c(){e=b("button"),l=b("span"),o=S(n),g(l,"class","svelte-1ezh0xm"),g(e,"class","tag svelte-1ezh0xm"),tt(e,"background-color",t[0].tagColor),K(e,"can-add",t[1]==="canAdd"),K(e,"can-remove",t[1]==="canRemove")},m(s,c){v(s,e,c),m(e,l),m(l,o),i||(r=P(e,"click",t[2]),i=!0)},p(s,[c]){c&1&&n!==(n=s[0].tagName+"")&&M(o,n),c&1&&tt(e,"background-color",s[0].tagColor),c&2&&K(e,"can-add",s[1]==="canAdd"),c&2&&K(e,"can-remove",s[1]==="canRemove")},i:E,o:E,d(s){s&&w(e),i=!1,r()}}}function mn(t,e,l){const n=Je();function o(){n("clicked",{boolFilter:i})}let{boolFilter:i}=e,{mode:r="normal"}=e;return t.$$set=s=>{"boolFilter"in s&&l(0,i=s.boolFilter),"mode"in s&&l(1,r=s.mode)},[i,r,o]}class Re extends Z{constructor(e){super(),Y(this,e,mn,_n,Q,{boolFilter:0,mode:1})}}const ge=[];function Ee(t,e=E){let l;const n=new Set;function o(s){if(Q(t,s)&&(t=s,l)){const c=!ge.length;for(const f of n)f[1](),ge.push(f,t);if(c){for(let f=0;f<ge.length;f+=2)ge[f][0](ge[f+1]);ge.length=0}}}function i(s){o(s(t))}function r(s,c=E){const f=[s,c];return n.add(f),n.size===1&&(l=e(o,i)||E),s(t),()=>{n.delete(f),n.size===0&&l&&(l(),l=null)}}return{set:o,update:i,subscribe:r}}const Ut=[],_e="All",Wt="local_views";function Kt(t){let e=new Map;for(const[l,n]of Object.entries(JSON.parse(t)))if(l!==_e){const i=[...n].map(r=>Ut.find(s=>s.id===r)).filter(r=>r!==void 0&&new Date(r.datetime)>new Date);e.set(l,i)}return e}function pn(){const t=localStorage.getItem(Wt);let e=new Map;if(e.set(_e,Ut),t!==null)for(const[l,n]of Kt(t).entries())e.set(l,n);return e}function lt(t){const e={};for(const[l,n]of t)if(l!==_e){const o=n.map(i=>i.id);e[l]=o}localStorage.setItem(Wt,JSON.stringify(e))}const{subscribe:hn,set:gn,update:bn}=Ee(pn()),G={subscribe:hn,set:t=>{lt(t),gn(t)},update:t=>{const e=t(xt(G));lt(e),bn(()=>e)}},x=Ee(_e),oe=Ee([]),wn=JSON.parse(JSON.stringify(He)),de=Ee(wn);function ot(t,e,l){const n=t.slice();return n[3]=e[l],n}function rt(t,e,l){const n=t.slice();return n[3]=e[l],n}function it(t){let e,l;return e=new Re({props:{boolFilter:t[3],mode:"canRemove"}}),e.$on("clicked",t[1]),{c(){J(e.$$.fragment)},m(n,o){j(e,n,o),l=!0},p:E,i(n){l||(T(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){z(e,n)}}}function st(t){let e=t[0].booleanTagNames.includes(t[3].tagName),l,n,o=e&&it(t);return{c(){o&&o.c(),l=Oe()},m(i,r){o&&o.m(i,r),v(i,l,r),n=!0},p(i,r){r&1&&(e=i[0].booleanTagNames.includes(i[3].tagName)),e?o?(o.p(i,r),r&1&&T(o,1)):(o=it(i),o.c(),T(o,1),o.m(l.parentNode,l)):o&&(re(),F(o,1,1,()=>{o=null}),ie())},i(i){n||(T(o),n=!0)},o(i){F(o),n=!1},d(i){i&&w(l),o&&o.d(i)}}}function ct(t){let e,l;return e=new Re({props:{boolFilter:t[3],mode:"canAdd"}}),e.$on("clicked",t[1]),{c(){J(e.$$.fragment)},m(n,o){j(e,n,o),l=!0},p:E,i(n){l||(T(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){z(e,n)}}}function ft(t){let e=!t[0].booleanTagNames.includes(t[3].tagName),l,n,o=e&&ct(t);return{c(){o&&o.c(),l=Oe()},m(i,r){o&&o.m(i,r),v(i,l,r),n=!0},p(i,r){r&1&&(e=!i[0].booleanTagNames.includes(i[3].tagName)),e?o?(o.p(i,r),r&1&&T(o,1)):(o=ct(i),o.c(),T(o,1),o.m(l.parentNode,l)):o&&(re(),F(o,1,1,()=>{o=null}),ie())},i(i){n||(T(o),n=!0)},o(i){F(o),n=!1},d(i){i&&w(l),o&&o.d(i)}}}function vn(t){let e,l,n,o,i,r,s,c,f,u,p,k,d,_=B(pe),C=[];for(let I=0;I<_.length;I+=1)C[I]=st(rt(t,_,I));const h=I=>F(C[I],1,1,()=>{C[I]=null});let N=B(pe),y=[];for(let I=0;I<N.length;I+=1)y[I]=ft(ot(t,N,I));const L=I=>F(y[I],1,1,()=>{y[I]=null});return{c(){e=b("div"),l=b("h3"),l.textContent="Filter concerts...",n=V(),o=b("div"),i=b("input"),r=V();for(let I=0;I<C.length;I+=1)C[I].c();s=V(),c=b("span"),c.textContent="Add a filter",f=V(),u=b("div");for(let I=0;I<y.length;I+=1)y[I].c();g(l,"class","svelte-1xrb0rp"),g(i,"id","search"),g(i,"type","text"),g(i,"placeholder","Search for a composer, performer, etc."),g(i,"class","svelte-1xrb0rp"),g(o,"class","horizontal-flex svelte-1xrb0rp"),g(c,"class","bold svelte-1xrb0rp"),g(u,"class","horizontal-flex svelte-1xrb0rp"),g(e,"class","filters svelte-1xrb0rp")},m(I,$){v(I,e,$),m(e,l),m(e,n),m(e,o),m(o,i),et(i,t[0].searchTerm),m(o,r);for(let a=0;a<C.length;a+=1)C[a]&&C[a].m(o,null);m(e,s),m(e,c),m(e,f),m(e,u);for(let a=0;a<y.length;a+=1)y[a]&&y[a].m(u,null);p=!0,k||(d=P(i,"input",t[2]),k=!0)},p(I,[$]){if($&1&&i.value!==I[0].searchTerm&&et(i,I[0].searchTerm),$&3){_=B(pe);let a;for(a=0;a<_.length;a+=1){const A=rt(I,_,a);C[a]?(C[a].p(A,$),T(C[a],1)):(C[a]=st(A),C[a].c(),T(C[a],1),C[a].m(o,null))}for(re(),a=_.length;a<C.length;a+=1)h(a);ie()}if($&3){N=B(pe);let a;for(a=0;a<N.length;a+=1){const A=ot(I,N,a);y[a]?(y[a].p(A,$),T(y[a],1)):(y[a]=ft(A),y[a].c(),T(y[a],1),y[a].m(u,null))}for(re(),a=N.length;a<y.length;a+=1)L(a);ie()}},i(I){if(!p){for(let $=0;$<_.length;$+=1)T(C[$]);for(let $=0;$<N.length;$+=1)T(y[$]);p=!0}},o(I){C=C.filter(Boolean);for(let $=0;$<C.length;$+=1)F(C[$]);y=y.filter(Boolean);for(let $=0;$<y.length;$+=1)F(y[$]);p=!1},d(I){I&&w(e),ee(C,I),ee(y,I),k=!1,d()}}}function kn(t,e,l){let n;R(t,de,r=>l(0,n=r));function o(r){const{boolFilter:s}=r.detail;n.booleanTagNames.includes(s.tagName)?D(de,n.booleanTagNames=n.booleanTagNames.filter(c=>c!==s.tagName),n):D(de,n.booleanTagNames=[...n.booleanTagNames,s.tagName],n)}function i(){n.searchTerm=this.value,de.set(n)}return[n,o,i]}class $n extends Z{constructor(e){super(),Y(this,e,kn,vn,Q,{})}}function ut(t,e,l){const n=t.slice();return n[1]=e[l],n}function at(t){let e,l;return e=new Re({props:{boolFilter:t[1]}}),{c(){J(e.$$.fragment)},m(n,o){j(e,n,o),l=!0},i(n){l||(T(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){z(e,n)}}}function dt(t){let e=t[1].filterFunc(t[0]),l,n,o=e&&at(t);return{c(){o&&o.c(),l=Oe()},m(i,r){o&&o.m(i,r),v(i,l,r),n=!0},p(i,r){r&1&&(e=i[1].filterFunc(i[0])),e?o?r&1&&T(o,1):(o=at(i),o.c(),T(o,1),o.m(l.parentNode,l)):o&&(re(),F(o,1,1,()=>{o=null}),ie())},i(i){n||(T(o),n=!0)},o(i){F(o),n=!1},d(i){i&&w(l),o&&o.d(i)}}}function Cn(t){let e,l,n=B(pe),o=[];for(let r=0;r<n.length;r+=1)o[r]=dt(ut(t,n,r));const i=r=>F(o[r],1,1,()=>{o[r]=null});return{c(){e=b("div");for(let r=0;r<o.length;r+=1)o[r].c();g(e,"id","tags"),g(e,"class","svelte-fzzkvs")},m(r,s){v(r,e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);l=!0},p(r,[s]){if(s&1){n=B(pe);let c;for(c=0;c<n.length;c+=1){const f=ut(r,n,c);o[c]?(o[c].p(f,s),T(o[c],1)):(o[c]=dt(f),o[c].c(),T(o[c],1),o[c].m(e,null))}for(re(),c=n.length;c<o.length;c+=1)i(c);ie()}},i(r){if(!l){for(let s=0;s<n.length;s+=1)T(o[s]);l=!0}},o(r){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)F(o[s]);l=!1},d(r){r&&w(e),ee(o,r)}}}function Nn(t,e,l){let{concert:n}=e;return t.$$set=o=>{"concert"in o&&l(0,n=o.concert)},[n]}class qt extends Z{constructor(e){super(),Y(this,e,Nn,Cn,Q,{concert:0})}}function Fe(t){let e=t.toLocaleString(void 0,{weekday:"long"}),l=t.toLocaleString(void 0,{day:"numeric",month:"long",year:"numeric"}),n=t.toLocaleString(void 0,{hour:"numeric",minute:"2-digit",hour12:!0});return`${l} (${e}), ${n}`}function Le(t){return t.min_price!==null&&t.max_price!==null?t.min_price===t.max_price?t.min_price===0?"Free entry":`Â£${t.min_price/100}`:`Â£${t.min_price/100}â€“Â£${t.max_price/100}`:"Price not available"}function yn(t){if(t===void 0)throw new Error("Unexpected undefined value");return t}function _t(t,e,l){const n=t.slice();n[6]=e[l];const o=yn(n[0].find(function(...r){return t[5](n[6],...r)}));return n[7]=o,n}function mt(t){let e,l=t[7].subtitle+"",n;return{c(){e=b("h4"),n=S(l),g(e,"class","svelte-1yphalp")},m(o,i){v(o,e,i),m(e,n)},p(o,i){i&3&&l!==(l=o[7].subtitle+"")&&M(n,l)},d(o){o&&w(e)}}}function pt(t){let e,l,n,o,i=t[7].title+"",r,s,c,f,u=Fe(new Date(t[7].datetime))+"",p,k,d=Le(t[7])+"",_,C,h,N,y;l=new qt({props:{concert:t[7]}});let L=t[7].subtitle!==null&&mt(t);function I(...$){return t[4](t[6],...$)}return{c(){e=b("button"),J(l.$$.fragment),n=V(),o=b("h3"),r=S(i),s=V(),L&&L.c(),c=V(),f=b("p"),p=S(u),k=S(`
                |
                `),_=S(d),C=V(),g(o,"class","svelte-1yphalp"),g(f,"class","svelte-1yphalp"),g(e,"class","concert svelte-1yphalp"),K(e,"active",t[2].includes(t[6]))},m($,a){v($,e,a),j(l,e,null),m(e,n),m(e,o),m(o,r),m(e,s),L&&L.m(e,null),m(e,c),m(e,f),m(f,p),m(f,k),m(f,_),m(e,C),h=!0,N||(y=P(e,"click",I),N=!0)},p($,a){t=$;const A={};a&3&&(A.concert=t[7]),l.$set(A),(!h||a&3)&&i!==(i=t[7].title+"")&&M(r,i),t[7].subtitle!==null?L?L.p(t,a):(L=mt(t),L.c(),L.m(e,c)):L&&(L.d(1),L=null),(!h||a&3)&&u!==(u=Fe(new Date(t[7].datetime))+"")&&M(p,u),(!h||a&3)&&d!==(d=Le(t[7])+"")&&M(_,d),(!h||a&6)&&K(e,"active",t[2].includes(t[6]))},i($){h||(T(l.$$.fragment,$),h=!0)},o($){F(l.$$.fragment,$),h=!1},d($){$&&w(e),z(l),L&&L.d(),N=!1,y()}}}function Tn(t){let e,l,n=B(t[1]),o=[];for(let r=0;r<n.length;r+=1)o[r]=pt(_t(t,n,r));const i=r=>F(o[r],1,1,()=>{o[r]=null});return{c(){e=b("div");for(let r=0;r<o.length;r+=1)o[r].c();g(e,"class","concert-list svelte-1yphalp")},m(r,s){v(r,e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);l=!0},p(r,[s]){if(s&15){n=B(r[1]);let c;for(c=0;c<n.length;c+=1){const f=_t(r,n,c);o[c]?(o[c].p(f,s),T(o[c],1)):(o[c]=pt(f),o[c].c(),T(o[c],1),o[c].m(e,null))}for(re(),c=n.length;c<o.length;c+=1)i(c);ie()}},i(r){if(!l){for(let s=0;s<n.length;s+=1)T(o[s]);l=!0}},o(r){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)F(o[s]);l=!1},d(r){r&&w(e),ee(o,r)}}}function Vn(t,e,l){let n;R(t,oe,f=>l(2,n=f));let{allConcerts:o}=e,{shownIds:i}=e;function r(f,u){n.includes(u)?f.shiftKey?D(oe,n=n.filter(p=>p!==u),n):n.length===1?D(oe,n=[],n):D(oe,n=[u],n):f.shiftKey?D(oe,n=[...n,u],n):D(oe,n=[u],n)}const s=(f,u)=>r(u,f),c=(f,u)=>u.id===f;return t.$$set=f=>{"allConcerts"in f&&l(0,o=f.allConcerts),"shownIds"in f&&l(1,i=f.shownIds)},[o,i,n,r,s,c]}class In extends Z{constructor(e){super(),Y(this,e,Vn,Tn,Q,{allConcerts:0,shownIds:1})}}function Sn(t){let e,l,n,o,i,r,s,c,f,u,p,k,d;return{c(){e=b("button"),e.innerHTML='<div id="background-close" class="svelte-1vxtpaw"></div>',l=V(),n=b("div"),o=b("p"),o.textContent="Sorry! There was an error loading the file:",i=V(),r=b("p"),s=S(t[5]),c=V(),f=b("button"),f.textContent="Try again",u=V(),p=b("button"),p.textContent="Close",g(e,"id","background-close"),g(e,"class","svelte-1vxtpaw"),g(o,"class","bold svelte-1vxtpaw"),g(r,"class","svelte-1vxtpaw"),g(f,"class","larger-text svelte-1vxtpaw"),g(p,"class","larger-text svelte-1vxtpaw"),g(n,"class","error svelte-1vxtpaw")},m(_,C){v(_,e,C),v(_,l,C),v(_,n,C),m(n,o),m(n,i),m(n,r),m(r,s),m(n,c),m(n,f),m(n,u),m(n,p),k||(d=[P(e,"click",t[8]),P(f,"click",t[15]),P(p,"click",t[8])],k=!0)},p(_,C){C&32&&M(s,_[5])},d(_){_&&(w(e),w(l),w(n)),k=!1,ce(d)}}}function Fn(t){let e,l,n,o,i,r,s,c,f,u,p,k,d,_;function C(y,L){return y[3]===null?On:Ln}let h=C(t),N=h(t);return{c(){e=b("button"),e.innerHTML='<div id="background-close" class="svelte-1vxtpaw"></div>',l=V(),n=b("div"),o=b("button"),i=b("p"),i.textContent="Drag a file here, or click to select a file",r=V(),N.c(),s=V(),c=b("input"),f=V(),u=b("button"),u.textContent="Load view from file",p=V(),k=b("button"),k.textContent="Close",g(e,"id","background-close"),g(e,"class","svelte-1vxtpaw"),g(i,"class","svelte-1vxtpaw"),g(o,"id","file-drop"),g(o,"class","svelte-1vxtpaw"),K(o,"highlighted",t[4]),g(c,"type","file"),g(c,"id","file-selector"),g(c,"class","svelte-1vxtpaw"),g(u,"class","larger-text bold svelte-1vxtpaw"),g(k,"class","larger-text svelte-1vxtpaw"),g(n,"id","file-select"),g(n,"class","svelte-1vxtpaw")},m(y,L){v(y,e,L),v(y,l,L),v(y,n,L),m(n,o),m(o,i),m(o,r),N.m(o,null),m(n,s),m(n,c),t[14](c),m(n,f),m(n,u),m(n,p),m(n,k),d||(_=[P(e,"click",t[8]),P(o,"drop",t[6]),P(o,"dragover",t[11]),P(o,"dragleave",t[12]),P(o,"click",t[13]),P(c,"change",t[7]),P(u,"click",t[9]),P(k,"click",t[8])],d=!0)},p(y,L){h===(h=C(y))&&N?N.p(y,L):(N.d(1),N=h(y),N&&(N.c(),N.m(o,null))),L&16&&K(o,"highlighted",y[4])},d(y){y&&(w(e),w(l),w(n)),N.d(),t[14](null),d=!1,ce(_)}}}function Ln(t){let e,l,n;return{c(){e=b("p"),l=S("âœ… "),n=S(t[2]),g(e,"class","green svelte-1vxtpaw")},m(o,i){v(o,e,i),m(e,l),m(e,n)},p(o,i){i&4&&M(n,o[2])},d(o){o&&w(e)}}}function On(t){let e;return{c(){e=b("p"),e.textContent="No file selected...",g(e,"class","greyed svelte-1vxtpaw")},m(l,n){v(l,e,n)},p:E,d(l){l&&w(e)}}}function En(t){let e,l,n;function o(s,c){if(s[0]==="select")return Fn;if(s[0]==="error")return Sn}let i=o(t),r=i&&i(t);return{c(){r&&r.c(),e=Oe()},m(s,c){r&&r.m(s,c),v(s,e,c),l||(n=P(window,"keydown",t[10]),l=!0)},p(s,[c]){i===(i=o(s))&&r?r.p(s,c):(r&&r.d(1),r=i&&i(s),r&&(r.c(),r.m(e.parentNode,e)))},i:E,o:E,d(s){s&&w(e),r&&r.d(s),l=!1,n()}}}function An(t,e,l){let n,o;R(t,x,$=>l(16,n=$)),R(t,G,$=>l(17,o=$));let{mode:i="select"}=e,r,s=null,c=null,f=!1,u=null;function p($){if($.preventDefault(),l(4,f=!1),$.dataTransfer){const a=$.dataTransfer.files[0];l(2,s=a.name);const A=new FileReader;A.onload=q=>{l(3,c=q.target.result)},A.readAsText(a)}}function k(){if(r.files){const $=r.files[0];l(2,s=$.name);const a=new FileReader;a.onload=A=>{l(3,c=A.target.result)},a.readAsText($)}}function d(){l(0,i="hidden"),l(2,s=null),l(3,c=null)}function _(){if(s!==null)try{const $=Kt(c);console.log($);for(let[a,A]of $){for(;o.has(a);)a=a+"*";o.set(a,A),D(G,o=new Map(o),o),D(x,n=a,n)}d()}catch($){l(0,i="error"),l(5,u=$.message)}}const C=$=>{$.key==="Escape"&&d()},h=$=>{$.preventDefault(),l(4,f=!0)},N=()=>{l(4,f=!1)},y=()=>r.click();function L($){ae[$?"unshift":"push"](()=>{r=$,l(1,r)})}const I=()=>{l(0,i="select")};return t.$$set=$=>{"mode"in $&&l(0,i=$.mode)},[i,r,s,c,f,u,p,k,d,_,C,h,N,y,L,I]}class Pn extends Z{constructor(e){super(),Y(this,e,An,En,Q,{mode:0})}}const Dn=t=>({}),ht=t=>({}),Mn=t=>({}),gt=t=>({});function bt(t){let e,l,n,o;const i=t[5].options,r=Bt(i,t,t[4],ht);return{c(){e=b("span"),e.textContent="â–¼",l=V(),n=b("div"),r&&r.c(),g(e,"class","smol svelte-10u1y03"),g(n,"class","dropdown-options svelte-10u1y03"),K(n,"left",t[2]==="left"),K(n,"right",t[2]==="right")},m(s,c){v(s,e,c),v(s,l,c),v(s,n,c),r&&r.m(n,null),o=!0},p(s,c){r&&r.p&&(!o||c&16)&&Ht(r,i,s,s[4],o?zt(i,s[4],c,Dn):Jt(s[4]),ht),(!o||c&4)&&K(n,"left",s[2]==="left"),(!o||c&4)&&K(n,"right",s[2]==="right")},i(s){o||(T(r,s),o=!0)},o(s){F(r,s),o=!1},d(s){s&&(w(e),w(l),w(n)),r&&r.d(s)}}}function Bn(t){let e,l,n,o,i,r;const s=t[5].text,c=Bt(s,t,t[4],gt);let f=t[1]&&bt(t);return{c(){e=b("div"),l=b("button"),c&&c.c(),n=V(),f&&f.c(),g(l,"class","dropdown-button svelte-10u1y03"),K(l,"selected",t[0]),g(e,"class","dropdown-trigger")},m(u,p){v(u,e,p),m(e,l),c&&c.m(l,null),m(l,n),f&&f.m(l,null),o=!0,i||(r=P(l,"click",t[3]),i=!0)},p(u,[p]){c&&c.p&&(!o||p&16)&&Ht(c,s,u,u[4],o?zt(s,u[4],p,Mn):Jt(u[4]),gt),u[1]?f?(f.p(u,p),p&2&&T(f,1)):(f=bt(u),f.c(),T(f,1),f.m(l,null)):f&&(re(),F(f,1,1,()=>{f=null}),ie()),(!o||p&1)&&K(l,"selected",u[0])},i(u){o||(T(c,u),T(f),o=!0)},o(u){F(c,u),F(f),o=!1},d(u){u&&w(e),c&&c.d(u),f&&f.d(),i=!1,r()}}}function jn(t,e,l){let{$$slots:n={},$$scope:o}=e,{selected:i=!1}=e,{hasOptions:r=!0}=e,{alignment:s="left"}=e;const c=Je();function f(){c("mainButtonClick",{})}return t.$$set=u=>{"selected"in u&&l(0,i=u.selected),"hasOptions"in u&&l(1,r=u.hasOptions),"alignment"in u&&l(2,s=u.alignment),"$$scope"in u&&l(4,o=u.$$scope)},[i,r,s,f,o,n]}class Ae extends Z{constructor(e){super(),Y(this,e,jn,Bn,Q,{selected:0,hasOptions:1,alignment:2})}}function wt(t,e,l){const n=t.slice();n[19]=e[l];const o=Gt(n[2].get(n[19])).length;n[20]=o;const i=n[0].length;return n[21]=i,n}function zn(t){let e=t[19]+"",l,n,o=t[20]+"",i,r;return{c(){l=S(e),n=S(" ("),i=S(o),r=S(")")},m(s,c){v(s,l,c),v(s,n,c),v(s,i,c),v(s,r,c)},p(s,c){c&4&&e!==(e=s[19]+"")&&M(l,e),c&4&&o!==(o=s[20]+"")&&M(i,o)},d(s){s&&(w(l),w(n),w(i),w(r))}}}function Hn(t){let e=t[19]+"",l,n,o=t[21]+"",i,r,s=t[20]+"",c,f;return{c(){l=S(e),n=S(" ("),i=S(o),r=S("/"),c=S(s),f=S(")")},m(u,p){v(u,l,p),v(u,n,p),v(u,i,p),v(u,r,p),v(u,c,p),v(u,f,p)},p(u,p){p&4&&e!==(e=u[19]+"")&&M(l,e),p&1&&o!==(o=u[21]+"")&&M(i,o),p&4&&s!==(s=u[20]+"")&&M(c,s)},d(u){u&&(w(l),w(n),w(i),w(r),w(c),w(f))}}}function Jn(t){let e;function l(i,r){return i[3]===i[19]&&i[21]!==i[20]?Hn:zn}let n=l(t),o=n(t);return{c(){e=b("span"),o.c(),g(e,"slot","text")},m(i,r){v(i,e,r),o.m(e,null)},p(i,r){n===(n=l(i))&&o?o.p(i,r):(o.d(1),o=n(i),o&&(o.c(),o.m(e,null)))},d(i){i&&w(e),o.d()}}}function Rn(t){let e,l,n,o,i;function r(){return t[12](t[19])}function s(){return t[13](t[19])}return{c(){e=b("button"),e.textContent="Export view to JSON",l=V(),n=b("button"),n.textContent="Delete view"},m(c,f){v(c,e,f),v(c,l,f),v(c,n,f),o||(i=[P(e,"click",r),P(n,"click",s)],o=!0)},p(c,f){t=c},d(c){c&&(w(e),w(l),w(n)),o=!1,ce(i)}}}function vt(t){let e,l;function n(){return t[14](t[19])}return e=new Ae({props:{hasOptions:t[19]!==_e,selected:t[3]===t[19],$$slots:{options:[Rn],text:[Jn]},$$scope:{ctx:t}}}),e.$on("mainButtonClick",n),{c(){J(e.$$.fragment)},m(o,i){j(e,o,i),l=!0},p(o,i){t=o;const r={};i&4&&(r.hasOptions=t[19]!==_e),i&12&&(r.selected=t[3]===t[19]),i&16777229&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(o){l||(T(e.$$.fragment,o),l=!0)},o(o){F(e.$$.fragment,o),l=!1},d(o){z(e,o)}}}function Un(t){let e;return{c(){e=b("span"),e.textContent="Add new view",g(e,"slot","text")},m(l,n){v(l,e,n)},p:E,d(l){l&&w(e)}}}function Wn(t){let e,l,n,o,i,r,s,c,f;return{c(){e=b("button"),e.textContent="New empty view",l=V(),n=b("button"),n.textContent="... from currently shown concerts",o=V(),i=b("button"),i.textContent="... from currently selected concerts",r=V(),s=b("button"),s.textContent="... from a file upload"},m(u,p){v(u,e,p),v(u,l,p),v(u,n,p),v(u,o,p),v(u,i,p),v(u,r,p),v(u,s,p),c||(f=[P(e,"click",t[5]),P(n,"click",t[6]),P(i,"click",t[7]),P(s,"click",t[8])],c=!0)},p:E,d(u){u&&(w(e),w(l),w(n),w(o),w(i),w(r),w(s)),c=!1,ce(f)}}}function Kn(t){let e,l,n,o,i,r,s,c=B(t[2].keys()),f=[];for(let d=0;d<c.length;d+=1)f[d]=vt(wt(t,c,d));const u=d=>F(f[d],1,1,()=>{f[d]=null});n=new Ae({props:{selected:!1,$$slots:{options:[Wn],text:[Un]},$$scope:{ctx:t}}});function p(d){t[15](d)}let k={};return t[1]!==void 0&&(k.mode=t[1]),i=new Pn({props:k}),ae.push(()=>ke(i,"mode",p)),{c(){e=b("div");for(let d=0;d<f.length;d+=1)f[d].c();l=V(),J(n.$$.fragment),o=V(),J(i.$$.fragment),g(e,"class","view-list svelte-9e8gf1")},m(d,_){v(d,e,_);for(let C=0;C<f.length;C+=1)f[C]&&f[C].m(e,null);m(e,l),j(n,e,null),v(d,o,_),j(i,d,_),s=!0},p(d,[_]){if(_&1565){c=B(d[2].keys());let N;for(N=0;N<c.length;N+=1){const y=wt(d,c,N);f[N]?(f[N].p(y,_),T(f[N],1)):(f[N]=vt(y),f[N].c(),T(f[N],1),f[N].m(e,l))}for(re(),N=c.length;N<f.length;N+=1)u(N);ie()}const C={};_&16777216&&(C.$$scope={dirty:_,ctx:d}),n.$set(C);const h={};!r&&_&2&&(r=!0,h.mode=d[1],ve(()=>r=!1)),i.$set(h)},i(d){if(!s){for(let _=0;_<c.length;_+=1)T(f[_]);T(n.$$.fragment,d),T(i.$$.fragment,d),s=!0}},o(d){f=f.filter(Boolean);for(let _=0;_<f.length;_+=1)F(f[_]);F(n.$$.fragment,d),F(i.$$.fragment,d),s=!1},d(d){d&&(w(e),w(o)),ee(f,d),z(n),z(i,d)}}}function Gt(t){if(t===void 0)throw new Error("Value is undefined");return t}function qn(t,e,l){let n,o,i,r;R(t,G,a=>l(2,n=a)),R(t,x,a=>l(3,o=a)),R(t,de,a=>l(16,i=a)),R(t,oe,a=>l(17,r=a));let{allConcerts:s}=e,{shownIds:c}=e;function f(a){D(x,o=a,o)}function u(){const a=C();a!==null&&(n.set(a,[]),D(G,n=new Map(n),n),D(x,o=a,o))}function p(){const a=C();if(a===null)return;const A=c.map(q=>s.find(se=>se.id===q));D(de,i=He,i),n.set(a,A),D(G,n=new Map(n),n),D(x,o=a,o)}function k(){const a=C();if(a===null)return;const A=r.map(q=>s.find(se=>se.id===q)).filter(q=>q!==void 0);D(de,i=He,i),n.set(a,A),D(G,n=new Map(n),n),D(x,o=a,o)}let d="hidden";function _(){l(1,d="select")}function C(){const a=prompt("Enter a name for the new view");return a===null?null:a===""?(alert("Please enter a name"),null):n.has(a)?(alert("A view with that name already exists"),null):a}function h(a){window.confirm(`Really delete view "${a}"?`),n.delete(a),D(G,n=new Map(n),n),D(x,o=_e,o)}function N(a){let A=Gt(n.get(a)).map(X=>X.id);const q={};q[a]=A;const se=JSON.stringify(q);if(console.log(se),console.log("Exporting view",a),window.showSaveFilePicker===void 0){alert("The export feature is only available in browsers that support the File System Access API. As of August 2024, this means Chrome, Edge, or Opera.");return}const fe={types:[{description:"concert list",accept:{"application/json":[".json"]}}],suggestedName:"concerts.json"};showSaveFilePicker(fe).then(X=>(console.log("Writing to file",X.name),X.createWritable())).then(X=>{X.write(se),X.close()})}const y=a=>N(a),L=a=>h(a),I=a=>f(a);function $(a){d=a,l(1,d)}return t.$$set=a=>{"allConcerts"in a&&l(11,s=a.allConcerts),"shownIds"in a&&l(0,c=a.shownIds)},[c,d,n,o,f,u,p,k,_,h,N,s,y,L,I,$]}class Gn extends Z{constructor(e){super(),Y(this,e,qn,Kn,Q,{allConcerts:11,shownIds:0})}}function Qn(t){let e,l,n,o,i,r,s,c,f;function u(h){t[4](h)}function p(h){t[5](h)}let k={};t[0]!==void 0&&(k.allConcerts=t[0]),t[1]!==void 0&&(k.shownIds=t[1]),l=new Gn({props:k}),ae.push(()=>ke(l,"allConcerts",u)),ae.push(()=>ke(l,"shownIds",p));function d(h){t[6](h)}function _(h){t[7](h)}let C={};return t[0]!==void 0&&(C.allConcerts=t[0]),t[1]!==void 0&&(C.shownIds=t[1]),r=new In({props:C}),ae.push(()=>ke(r,"allConcerts",d)),ae.push(()=>ke(r,"shownIds",_)),{c(){e=b("div"),J(l.$$.fragment),i=V(),J(r.$$.fragment),g(e,"class","overview svelte-1ju0k9p")},m(h,N){v(h,e,N),j(l,e,null),m(e,i),j(r,e,null),f=!0},p(h,[N]){const y={};!n&&N&1&&(n=!0,y.allConcerts=h[0],ve(()=>n=!1)),!o&&N&2&&(o=!0,y.shownIds=h[1],ve(()=>o=!1)),l.$set(y);const L={};!s&&N&1&&(s=!0,L.allConcerts=h[0],ve(()=>s=!1)),!c&&N&2&&(c=!0,L.shownIds=h[1],ve(()=>c=!1)),r.$set(L)},i(h){f||(T(l.$$.fragment,h),T(r.$$.fragment,h),f=!0)},o(h){F(l.$$.fragment,h),F(r.$$.fragment,h),f=!1},d(h){h&&w(e),z(l),z(r)}}}function Xn(t,e,l){let n,o,i,r;R(t,de,_=>l(2,n=_)),R(t,x,_=>l(3,o=_)),R(t,oe,_=>l(8,i=_)),R(t,G,_=>l(9,r=_));let s=r.get(o),c=nt(s,n);function f(_,C){l(0,s=r.get(_)),l(1,c=nt(s,C)),D(oe,i=[],i)}function u(_){s=_,l(0,s)}function p(_){c=_,l(1,c)}function k(_){s=_,l(0,s)}function d(_){c=_,l(1,c)}return t.$$.update=()=>{t.$$.dirty&12&&f(o,n)},[s,c,n,o,u,p,k,d]}class Yn extends Z{constructor(e){super(),Y(this,e,Xn,Qn,Q,{})}}function kt(t,e,l){const n=t.slice();return n[8]=e[l],n}function $t(t,e,l){const n=t.slice();return n[11]=e[l],n}function Ct(t,e,l){const n=t.slice();return n[14]=e[l],n}function Nt(t,e,l){const n=t.slice();return n[17]=e[l],n}function yt(t){let e,l=t[0].subtitle+"",n;return{c(){e=S("â€” "),n=S(l)},m(o,i){v(o,e,i),v(o,n,i)},p(o,i){i&1&&l!==(l=o[0].subtitle+"")&&M(n,l)},d(o){o&&(w(e),w(n))}}}function Zn(t){let e;return{c(){e=b("span"),e.textContent="Add to view",g(e,"slot","text")},m(l,n){v(l,e,n)},p:E,d(l){l&&w(e)}}}function Tt(t){let e,l=t[17]+"",n,o,i;function r(){return t[4](t[17])}return{c(){e=b("button"),n=S(l)},m(s,c){v(s,e,c),m(e,n),o||(i=P(e,"click",r),o=!0)},p(s,c){t=s,c&1&&l!==(l=t[17]+"")&&M(n,l)},d(s){s&&w(e),o=!1,i()}}}function xn(t){let e,l,n,o,i=B(t[1](t[0])),r=[];for(let s=0;s<i.length;s+=1)r[s]=Tt(Nt(t,i,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=V(),l=b("button"),l.textContent="New empty view..."},m(s,c){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(s,c);v(s,e,c),v(s,l,c),n||(o=P(l,"click",t[5]),n=!0)},p(s,c){if(c&7){i=B(s[1](s[0]));let f;for(f=0;f<i.length;f+=1){const u=Nt(s,i,f);r[f]?r[f].p(u,c):(r[f]=Tt(u),r[f].c(),r[f].m(e.parentNode,e))}for(;f<r.length;f+=1)r[f].d(1);r.length=i.length}},d(s){s&&(w(e),w(l)),ee(r,s),n=!1,o()}}}function Vt(t){let e,l,n,o;return{c(){e=S("|Â "),l=b("a"),n=S("Link to programme (PDF)"),g(l,"href",o=t[0].programme_pdf_url),g(l,"target","_blank")},m(i,r){v(i,e,r),v(i,l,r),m(l,n)},p(i,r){r&1&&o!==(o=i[0].programme_pdf_url)&&g(l,"href",o)},d(i){i&&(w(e),w(l))}}}function el(t){let e,l=B(t[0].performers),n=[];for(let o=0;o<l.length;o+=1)n[o]=It(Ct(t,l,o));return{c(){e=b("div");for(let o=0;o<n.length;o+=1)n[o].c();g(e,"class","two-col-grid svelte-1w3dtbr")},m(o,i){v(o,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(o,i){if(i&1){l=B(o[0].performers);let r;for(r=0;r<l.length;r+=1){const s=Ct(o,l,r);n[r]?n[r].p(s,i):(n[r]=It(s),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(o){o&&w(e),ee(n,o)}}}function tl(t){let e;return{c(){e=S("None listed.")},m(l,n){v(l,e,n)},p:E,d(l){l&&w(e)}}}function It(t){let e,l=t[14].name+"",n,o,i,r=(t[14].instrument?t[14].instrument:"")+"",s;return{c(){e=b("span"),n=S(l),o=V(),i=b("span"),s=S(r)},m(c,f){v(c,e,f),m(e,n),v(c,o,f),v(c,i,f),m(i,s)},p(c,f){f&1&&l!==(l=c[14].name+"")&&M(n,l),f&1&&r!==(r=(c[14].instrument?c[14].instrument:"")+"")&&M(s,r)},d(c){c&&(w(e),w(o),w(i))}}}function nl(t){let e,l=B(t[0].pieces),n=[];for(let o=0;o<l.length;o+=1)n[o]=St($t(t,l,o));return{c(){e=b("div");for(let o=0;o<n.length;o+=1)n[o].c();g(e,"class","two-col-grid svelte-1w3dtbr")},m(o,i){v(o,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(o,i){if(i&1){l=B(o[0].pieces);let r;for(r=0;r<l.length;r+=1){const s=$t(o,l,r);n[r]?n[r].p(s,i):(n[r]=St(s),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(o){o&&w(e),ee(n,o)}}}function ll(t){let e;return{c(){e=S("None provided.")},m(l,n){v(l,e,n)},p:E,d(l){l&&w(e)}}}function St(t){let e,l=t[11].composer+"",n,o,i=t[11].title+"";return{c(){e=b("span"),n=S(l),o=b("span")},m(r,s){v(r,e,s),m(e,n),v(r,o,s),o.innerHTML=i},p(r,s){s&1&&l!==(l=r[11].composer+"")&&M(n,l),s&1&&i!==(i=r[11].title+"")&&(o.innerHTML=i)},d(r){r&&(w(e),w(o))}}}function ol(t){let e;return{c(){e=S("None provided.")},m(l,n){v(l,e,n)},p:E,d(l){l&&w(e)}}}function rl(t){let e,l=B(t[0].description.split(`
`)),n=[];for(let o=0;o<l.length;o+=1)n[o]=Ft(kt(t,l,o));return{c(){e=b("div");for(let o=0;o<n.length;o+=1)n[o].c();g(e,"id","description"),g(e,"class","svelte-1w3dtbr")},m(o,i){v(o,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(o,i){if(i&1){l=B(o[0].description.split(`
`));let r;for(r=0;r<l.length;r+=1){const s=kt(o,l,r);n[r]?n[r].p(s,i):(n[r]=Ft(s),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length}},d(o){o&&w(e),ee(n,o)}}}function Ft(t){let e,l=t[8]+"",n;return{c(){e=b("p"),n=S(l),g(e,"class","svelte-1w3dtbr")},m(o,i){v(o,e,i),m(e,n)},p(o,i){i&1&&l!==(l=o[8]+"")&&M(n,l)},d(o){o&&w(e)}}}function il(t){let e,l,n=t[0].title+"",o,i,r,s,c,f,u,p,k,d=Fe(new Date(t[0].datetime))+"",_,C,h=Le(t[0])+"",N,y,L,I,$,a,A,q,se,fe,X,Ue,We,Ne,Ke,Pe,ye,qe,ue,U=t[0].subtitle&&yt(t);c=new qt({props:{concert:t[0]}}),u=new Ae({props:{alignment:"right",$$slots:{options:[xn],text:[Zn]},$$scope:{ctx:t}}});let W=t[0].programme_pdf_url&&Vt(t);function Ge(O,H){return O[0].performers.length===0?tl:el}let Te=Ge(t),te=Te(t);function Qe(O,H){return O[0].pieces.length===0?ll:nl}let Ve=Qe(t),ne=Ve(t);function Xe(O,H){return O[0].description?rl:ol}let Ie=Xe(t),le=Ie(t);return{c(){e=b("div"),l=b("h2"),o=S(n),i=V(),U&&U.c(),r=V(),s=b("div"),J(c.$$.fragment),f=V(),J(u.$$.fragment),p=V(),k=b("div"),_=S(d),C=S(`
        |
        `),N=S(h),y=V(),L=b("br"),I=V(),$=b("a"),a=S("Link to concert"),q=V(),W&&W.c(),se=V(),fe=b("div"),X=b("h3"),X.textContent="Performer(s)",Ue=V(),te.c(),We=V(),Ne=b("h3"),Ne.textContent="Programme",Ke=V(),ne.c(),Pe=V(),ye=b("h3"),ye.textContent="Description",qe=V(),le.c(),g(l,"class","svelte-1w3dtbr"),g(s,"class","left-and-right svelte-1w3dtbr"),g($,"href",A=t[0].url),g($,"target","_blank"),g(X,"class","svelte-1w3dtbr"),g(Ne,"class","svelte-1w3dtbr"),g(ye,"class","svelte-1w3dtbr"),g(e,"id","selected"),g(e,"class","svelte-1w3dtbr")},m(O,H){v(O,e,H),m(e,l),m(l,o),m(l,i),U&&U.m(l,null),m(e,r),m(e,s),j(c,s,null),m(s,f),j(u,s,null),m(e,p),m(e,k),m(k,_),m(k,C),m(k,N),m(k,y),m(k,L),m(k,I),m(k,$),m($,a),m(k,q),W&&W.m(k,null),m(e,se),m(e,fe),m(fe,X),m(fe,Ue),te.m(fe,null),m(e,We),m(e,Ne),m(e,Ke),ne.m(e,null),m(e,Pe),m(e,ye),m(e,qe),le.m(e,null),ue=!0},p(O,[H]){(!ue||H&1)&&n!==(n=O[0].title+"")&&M(o,n),O[0].subtitle?U?U.p(O,H):(U=yt(O),U.c(),U.m(l,null)):U&&(U.d(1),U=null);const Ye={};H&1&&(Ye.concert=O[0]),c.$set(Ye);const Ze={};H&1048577&&(Ze.$$scope={dirty:H,ctx:O}),u.$set(Ze),(!ue||H&1)&&d!==(d=Fe(new Date(O[0].datetime))+"")&&M(_,d),(!ue||H&1)&&h!==(h=Le(O[0])+"")&&M(N,h),(!ue||H&1&&A!==(A=O[0].url))&&g($,"href",A),O[0].programme_pdf_url?W?W.p(O,H):(W=Vt(O),W.c(),W.m(k,null)):W&&(W.d(1),W=null),Te===(Te=Ge(O))&&te?te.p(O,H):(te.d(1),te=Te(O),te&&(te.c(),te.m(fe,null))),Ve===(Ve=Qe(O))&&ne?ne.p(O,H):(ne.d(1),ne=Ve(O),ne&&(ne.c(),ne.m(e,Pe))),Ie===(Ie=Xe(O))&&le?le.p(O,H):(le.d(1),le=Ie(O),le&&(le.c(),le.m(e,null)))},i(O){ue||(T(c.$$.fragment,O),T(u.$$.fragment,O),ue=!0)},o(O){F(c.$$.fragment,O),F(u.$$.fragment,O),ue=!1},d(O){O&&w(e),U&&U.d(),z(c),z(u),W&&W.d(),te.d(),ne.d(),le.d()}}}function sl(t,e,l){let n;R(t,G,p=>l(6,n=p));let{selectedConcert:o}=e;function i(p){let k=[];for(const[d,_]of n.entries())_.find(C=>C.id===p.id)===void 0&&k.push(d);return k}const r=Je();function s(p,k){r("add",{concerts:[p],viewName:k})}function c(p){r("addNew",{concerts:[p]})}const f=p=>{s(o,p)},u=()=>{c(o)};return t.$$set=p=>{"selectedConcert"in p&&l(0,o=p.selectedConcert)},[o,i,s,c,f,u]}class cl extends Z{constructor(e){super(),Y(this,e,sl,il,Q,{selectedConcert:0})}}function Lt(t,e,l){const n=t.slice();return n[13]=e[l],n}function Ot(t,e,l){const n=t.slice();return n[16]=e[l],n}function fl(t){let e,l,n=t[1].length+"",o,i,r,s,c,f,u,p=B(t[1]),k=[];for(let d=0;d<p.length;d+=1)k[d]=Et(Ot(t,p,d));return f=new Ae({props:{$$slots:{options:[_l],text:[dl]},$$scope:{ctx:t}}}),{c(){e=b("div"),l=b("h2"),o=S(n),i=S(" concerts selected"),r=V(),s=b("div");for(let d=0;d<k.length;d+=1)k[d].c();c=V(),J(f.$$.fragment),g(s,"id","selected-concerts-summary"),g(s,"class","svelte-ecb6r2"),g(e,"id","centred-text"),g(e,"class","svelte-ecb6r2")},m(d,_){v(d,e,_),m(e,l),m(l,o),m(l,i),m(e,r),m(e,s);for(let C=0;C<k.length;C+=1)k[C]&&k[C].m(s,null);m(e,c),j(f,e,null),u=!0},p(d,_){if((!u||_&2)&&n!==(n=d[1].length+"")&&M(o,n),_&2){p=B(d[1]);let h;for(h=0;h<p.length;h+=1){const N=Ot(d,p,h);k[h]?k[h].p(N,_):(k[h]=Et(N),k[h].c(),k[h].m(s,null))}for(;h<k.length;h+=1)k[h].d(1);k.length=p.length}const C={};_&524291&&(C.$$scope={dirty:_,ctx:d}),f.$set(C)},i(d){u||(T(f.$$.fragment,d),u=!0)},o(d){F(f.$$.fragment,d),u=!1},d(d){d&&w(e),ee(k,d),z(f)}}}function ul(t){let e;return{c(){e=b("div"),e.innerHTML='<h2>No concert selected</h2> <p class="svelte-ecb6r2">Select a concert from the list on the left to view details :)</p> <p class="italic svelte-ecb6r2">(Tip: Use shift-click to select multiple concerts)</p>',g(e,"id","centred-text"),g(e,"class","svelte-ecb6r2")},m(l,n){v(l,e,n)},p:E,i:E,o:E,d(l){l&&w(e)}}}function al(t){let e,l;return e=new cl({props:{selectedConcert:t[1][0]}}),e.$on("add",t[7]),e.$on("addNew",t[8]),{c(){J(e.$$.fragment)},m(n,o){j(e,n,o),l=!0},p(n,o){const i={};o&2&&(i.selectedConcert=n[1][0]),e.$set(i)},i(n){l||(T(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){z(e,n)}}}function Et(t){let e,l,n=t[16].title+"",o,i,r;return{c(){e=b("p"),l=b("a"),o=S(n),r=V(),g(l,"href",i=t[16].url),g(l,"target","_blank"),g(e,"class","svelte-ecb6r2")},m(s,c){v(s,e,c),m(e,l),m(l,o),m(e,r)},p(s,c){c&2&&n!==(n=s[16].title+"")&&M(o,n),c&2&&i!==(i=s[16].url)&&g(l,"href",i)},d(s){s&&w(e)}}}function dl(t){let e;return{c(){e=b("span"),e.textContent="Add to view",g(e,"slot","text")},m(l,n){v(l,e,n)},p:E,d(l){l&&w(e)}}}function At(t){let e,l=t[13]+"",n,o,i;function r(){return t[10](t[13])}return{c(){e=b("button"),n=S(l)},m(s,c){v(s,e,c),m(e,n),o||(i=P(e,"click",r),o=!0)},p(s,c){t=s,c&1&&l!==(l=t[13]+"")&&M(n,l)},d(s){s&&w(e),o=!1,i()}}}function _l(t){let e,l,n,o,i=B(t[0].keys().filter(t[9])),r=[];for(let s=0;s<i.length;s+=1)r[s]=At(Lt(t,i,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=V(),l=b("button"),l.textContent="New empty view..."},m(s,c){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(s,c);v(s,e,c),v(s,l,c),n||(o=P(l,"click",t[11]),n=!0)},p(s,c){if(c&7){i=B(s[0].keys().filter(s[9]));let f;for(f=0;f<i.length;f+=1){const u=Lt(s,i,f);r[f]?r[f].p(u,c):(r[f]=At(u),r[f].c(),r[f].m(e.parentNode,e))}for(;f<r.length;f+=1)r[f].d(1);r.length=i.length}},d(s){s&&(w(e),w(l)),ee(r,s),n=!1,o()}}}function ml(t){let e,l,n,o;const i=[al,ul,fl],r=[];function s(c,f){return c[1].length===1?0:c[1].length===0?1:2}return l=s(t),n=r[l]=i[l](t),{c(){e=b("div"),n.c(),g(e,"class","details svelte-ecb6r2")},m(c,f){v(c,e,f),r[l].m(e,null),o=!0},p(c,[f]){let u=l;l=s(c),l===u?r[l].p(c,f):(re(),F(r[u],1,1,()=>{r[u]=null}),ie(),n=r[l],n?n.p(c,f):(n=r[l]=i[l](c),n.c()),T(n,1),n.m(e,null))},i(c){o||(T(n),o=!0)},o(c){F(n),o=!1},d(c){c&&w(e),r[l].d()}}}function pl(t,e){let l=new Date(t.datetime),n=new Date(e.datetime);return l.getTime()-n.getTime()}function hl(t,e,l){let n,o,i;R(t,oe,h=>l(5,n=h)),R(t,x,h=>l(6,o=h)),R(t,G,h=>l(0,i=h));let r=i.get(o),s=r.filter(h=>n.includes(h.id));function c(h,N){const L=[...i.get(N),...h].filter((I,$,a)=>a.indexOf(I)===$).sort(pl);i.set(N,L),D(G,i=new Map(i),i)}function f(h){const N=u();N!==null&&(i.set(N,h),D(G,i=new Map(i),i),D(x,o=N,o))}function u(){const h=prompt("Enter a name for the new view");return h===null?null:h===""?(alert("Please enter a name"),null):i.has(h)?(alert("A view with that name already exists"),null):h}const p=h=>c(h.detail.concerts,h.detail.viewName),k=h=>f(h.detail.concerts),d=h=>h!==_e,_=h=>{c(s,h)},C=()=>{f(s)};return t.$$.update=()=>{t.$$.dirty&113&&(l(4,r=i.get(o)),l(1,s=r.filter(h=>n.includes(h.id))))},[i,s,c,f,r,n,o,p,k,d,_,C]}class gl extends Z{constructor(e){super(),Y(this,e,hl,ml,Q,{})}}function bl(t){let e,l,n,o,i,r,s,c,f,u,p,k,d;return o=new an({}),s=new Yn({}),u=new $n({}),k=new gl({}),{c(){e=b("body"),l=b("main"),n=b("div"),J(o.$$.fragment),i=V(),r=b("div"),J(s.$$.fragment),c=V(),f=b("div"),J(u.$$.fragment),p=V(),J(k.$$.fragment),g(n,"class","top svelte-1yhbyug"),g(f,"class","bottom-right svelte-1yhbyug"),g(r,"class","bottom svelte-1yhbyug"),g(l,"class","svelte-1yhbyug"),g(e,"class","svelte-1yhbyug")},m(_,C){v(_,e,C),m(e,l),m(l,n),j(o,n,null),m(l,i),m(l,r),j(s,r,null),m(r,c),m(r,f),j(u,f,null),m(f,p),j(k,f,null),d=!0},p:E,i(_){d||(T(o.$$.fragment,_),T(s.$$.fragment,_),T(u.$$.fragment,_),T(k.$$.fragment,_),d=!0)},o(_){F(o.$$.fragment,_),F(s.$$.fragment,_),F(u.$$.fragment,_),F(k.$$.fragment,_),d=!1},d(_){_&&w(e),z(o),z(s),z(u),z(k)}}}class wl extends Z{constructor(e){super(),Y(this,e,null,bl,Q,{})}}new wl({target:document.getElementById("app")});
